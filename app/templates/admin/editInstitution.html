{% extends "master.html" %}
{% block content %}

    <div class="row">
        <div class="col-lg-12">
            {% if user.isSuperAdmin() %}
            <h1 class="page-header">Super Admin</h1>
            {% else %}
            <h1 class="page-header">Admin</h1>
            {% endif %}
        </div>
        <!-- /.col-lg-12 -->
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="well">
                <h4>Institution</h4>
                <form role="form" method="post", action="/institution/{{ id }}/update">
                    <div class="form-group">
                        <label>Name</label>
                        <input class="form-control" name="name" value="{{ institution.name }}">
                    </div>
                    <div class="form-group">
                        <label>Country</label>
                        <input class="form-control" name="country" value="{{ institution.country }}">
                    </div>
                    <div class="form-group">
                        <label>City</label>
                        <input class="form-control" name="city" value="{{ institution.city }}">
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <input class="form-control" name="address" value="{{ institution.address }}">
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>A+ warning limit</label>
                            <input class="form-control" name="A+low" value="{{ institution.getAplus() }}">
                        </div>
                        <div class="form-group">
                            <label>B+ warning limit</label>
                            <input class="form-control" name="B+low" value="{{ institution.getBplus() }}">
                        </div>
                        <div class="form-group">
                            <label>AB+ warning limit</label>
                            <input class="form-control" name="AB+low" value="{{ institution.getABplus() }}">
                        </div>
                        <div class="form-group">
                            <label>0+ warning limit</label>
                            <input class="form-control" name="0+low" value="{{ institution.get0plus() }}">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>A- warning limit</label>
                            <input class="form-control" name="A-low" value="{{ institution.getAminus() }}">
                        </div>
                        <div class="form-group">
                            <label>B- warning limit</label>
                            <input class="form-control" name="B-low" value="{{ institution.getBminus() }}">
                        </div>
                        <div class="form-group">
                            <label>AB- warning limit</label>
                            <input class="form-control" name="AB-low" value="{{ institution.getABminus() }}">
                        </div>
                        <div class="form-group">
                            <label>0- warning limit</label>
                            <input class="form-control" name="0-low" value="{{ institution.get0minus() }}">
                        </div>
                    </div>
                    <button class="btn btn-default" type="submit">Submit</button>
                </form>
                {% if institution.active %}
                    <button class="btn btn-default hidden" id="activateButton" onclick="activateInstitution('{{ id }}')">Activate</button>
                    <button class="btn btn-default" id="deactivateButton" onclick="deactivateInstitution('{{ id }}')">Deactivate</button>
                {% else %}
                    <button class="btn btn-default" id="activateButton" onclick="activateInstitution('{{ id }}')">Activate</button>
                    <button class="btn btn-default hidden" id="deactivateButton" onclick="deactivateInstitution('{{ id }}')">Deactivate</button>
                {% endif %}
            </div>
        </div>
        <!-- /.col-lg-12 -->
    </div>

{% endblock %}

{% block scripts %}
    <script src="/static/js/MagicApp.js"></script>
    <script>
    function activateInstitution(id){
            $.post("/institution/" + id + "/activate", function() {
                hideElement($("#activateButton")[0]);
                showElement($("#deactivateButton")[0]);
            });
    }

    function deactivateInstitution(id){
            $.post("/institution/" + id + "/deactivate", function() {
                hideElement($("#deactivateButton")[0]);
                showElement($("#activateButton")[0]);
            });
    }
    </script>
{% endblock %}